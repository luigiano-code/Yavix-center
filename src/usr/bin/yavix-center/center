#!/usr/bin/env python3

import gi

gi.require_version("Gtk", "4.0")
gi.require_version("Adw", "1")
from gi.repository import Gtk, Adw, GLib
import sys


from updater_page import UpdaterPage
from cleaner_page import CleanerPage

class MainWindow(Gtk.ApplicationWindow):
	def __init__(self, app):
		super().__init__(application=app)
		self.stack = Gtk.Stack()
		self.stack.set_transition_type(Gtk.StackTransitionType.SLIDE_LEFT_RIGHT)
		self.stack.set_transition_duration(200)

		self.sidebar = Gtk.StackSidebar(stack=self.stack)
		self.sidebar.set_vexpand(True)
		self.sidebar.set_halign(Gtk.Align.START)
		self.sidebar.set_margin_top(10)
		self.sidebar.set_margin_bottom(10)
		self.sidebar.set_margin_start(10)
		self.sidebar.set_margin_end(10)

		layout = Gtk.Box(orientation=Gtk.Orientation.HORIZONTAL, spacing=10)
		layout.append(self.sidebar)
		layout.append(self.stack)

		self.set_child(layout)

		self.stack.add_titled(UpdaterPage(), "1", "Updater Page")
		self.stack.add_titled(CleanerPage(), "2", "Cleaner Page")

class InstallerApp(Adw.Application):
	def __init__(self):
		super().__init__(application_id="com.luigiano-code.Yavix-center")

	def do_activate(self):
		win = MainWindow(self)
		win.present()

if __name__ == "__main__":
	app = InstallerApp()
	app.run(sys.argv)
